<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบคำนวณพื้นที่อาคาร</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Sarabun', sans-serif;
        }
        body {
            margin: 0;
            padding: 20px;
            background-color: #f0f2f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .calculation-type {
            margin-bottom: 20px;
        }
        select, input {
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 300px;
        }
        .calculation-group {
            display: none;
            margin-top: 20px;
        }
        .calculation-group.active {
            display: block;
        }
        .input-group {
            margin-bottom: 15px;
        }
        .input-group label {
            display: inline-block;
            width: 200px;
            margin-right: 10px;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            background: #e8f5e9;
            border-radius: 4px;
        }
        .divider {
            height: 2px;
            background: #ddd;
            margin: 30px 0;
        }
        .unit-converter {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .thai-converter {
            background: #f3e5f5;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .thai-converter .result {
            background: #e1bee7;
            font-weight: bold;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ส่วนบน - การคำนวณ FAR/OSR/BCR -->
        <div class="section">
            <div class="calculation-type">
                <label>เลือกประเภทการคำนวณ:</label>
                <select id="calcType">
                    <option value="FAR">FAR (Floor Area Ratio)</option>
                    <option value="OSR">OSR (Open Space Ratio)</option>
                    <option value="BCR">BCR (Building Coverage Ratio)</option>
                </select>
            </div>

            <!-- FAR Calculations -->
            <div id="farCalc" class="calculation-group active">
                <h3>การคำนวณ FAR</h3>
                <div class="input-group">
                    <label>พื้นที่อาคารรวมทุกชั้น (ตร.ม.):</label>
                    <input type="number" id="farTotalArea" step="0.01">
                </div>
                <div class="input-group">
                    <label>ขนาดที่ดิน (ตร.ม.):</label>
                    <input type="number" id="farLandArea" step="0.01">
                </div>
                <div class="input-group">
                    <label>ค่า FAR:</label>
                    <input type="number" id="farValue" step="0.01">
                </div>
                <div class="result" id="farResult"></div>
            </div>

            <!-- OSR Calculations -->
            <div id="osrCalc" class="calculation-group">
                <h3>การคำนวณ OSR</h3>
                <div class="input-group">
                    <label>พื้นที่ว่าง (ตร.ม.):</label>
                    <input type="number" id="osrOpenSpace" step="0.01">
                </div>
                <div class="input-group">
                    <label>พื้นที่ใช้สอยรวม (ตร.ม.):</label>
                    <input type="number" id="osrTotalArea" step="0.01">
                </div>
                <div class="input-group">
                    <label>ค่า OSR (%):</label>
                    <input type="number" id="osrValue" step="0.01">
                </div>
                <div class="result" id="osrResult"></div>
            </div>

            <!-- BCR Calculations -->
            <div id="bcrCalc" class="calculation-group">
                <h3>การคำนวณ BCR</h3>
                <div class="input-group">
                    <label>พื้นที่อาคารปกคลุมดิน (ตร.ม.):</label>
                    <input type="number" id="bcrCoverArea" step="0.01">
                </div>
                <div class="input-group">
                    <label>ขนาดที่ดิน (ตร.ม.):</label>
                    <input type="number" id="bcrLandArea" step="0.01">
                </div>
                <div class="input-group">
                    <label>ค่า BCR (%):</label>
                    <input type="number" id="bcrValue" step="0.01">
                </div>
                <div class="result" id="bcrResult"></div>
            </div>
        </div>

        <div class="divider"></div>

        <!-- ส่วนล่าง - การแปลงหน่วย -->
        <div class="section">
            <h3>การแปลงหน่วยการวัดพื้นที่</h3>
            <div class="unit-converter">
                <div class="input-group">
                    <label>หน่วยต้นทาง:</label>
                    <select id="fromUnit">
                        <option value="rai">ไร่</option>
                        <option value="ngan">งาน</option>
                        <option value="sqwa">ตารางวา</option>
                        <option value="sqm">ตารางเมตร</option>
                        <option value="sqkm">ตารางกิโลเมตร</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>หน่วยปลายทาง:</label>
                    <select id="toUnit">
                        <option value="sqm">ตารางเมตร</option>
                        <option value="rai">ไร่</option>
                        <option value="ngan">งาน</option>
                        <option value="sqwa">ตารางวา</option>
                        <option value="sqkm">ตารางกิโลเมตร</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>ค่าที่ต้องการแปลง:</label>
                    <input type="number" id="convertValue" step="any">
                </div>
                <div class="result" id="convertResult"></div>
            </div>
        </div>

        <div class="divider"></div>

        <!-- ส่วนใหม่ - การแปลงหน่วยไทย -->
        <div class="section">
            <h3>แปลงตารางเมตรเป็นหน่วยไทย (ไร่ งาน ตารางวา)</h3>
            <div class="thai-converter">
                <div class="input-group">
                    <label>จำนวนตารางเมตร:</label>
                    <input type="number" id="thaiConvertValue" step="0.01" placeholder="กรอกจำนวนตารางเมตร ควรใส่ค่าตั้งแต่ 4">
                </div>
                <div class="result" id="thaiConvertResult"></div>
            </div>
        </div>

        <div class="divider"></div>

        <!-- ส่วนใหม่ - การแปลงหน่วยไทยเป็นตารางเมตร -->
        <div class="section">
            <h3>แปลงหน่วยไทย (ไร่ งาน ตารางวา) เป็นตารางเมตร</h3>
            <div class="thai-converter">
                <div class="input-group">
                    <label>จำนวนไร่:</label>
                    <input type="number" id="thaiToSqmRai" step="0.01" placeholder="กรอกจำนวนไร่">
                </div>
                <div class="input-group">
                    <label>จำนวนงาน:</label>
                    <input type="number" id="thaiToSqmNgan" step="0.01" placeholder="กรอกจำนวนงาน ค่าควรต่ำกว่า 4">
                </div>
                <div class="input-group">
                    <label>จำนวนตารางวา:</label>
                    <input type="number" id="thaiToSqmWa" step="0.01" placeholder="กรอกจำนวนตารางวา ค่าควรต่ำกว่า 100">
                </div>
                <div class="result" id="thaiToSqmResult"></div>
            </div>
        </div>
    </div>

    <script>
        // แสดงการคำนวณตามประเภทที่เลือก
        document.getElementById('calcType').addEventListener('change', function() {
            document.querySelectorAll('.calculation-group').forEach(group => {
                group.classList.remove('active');
            });
            document.getElementById(this.value.toLowerCase() + 'Calc').classList.add('active');
        });

        // การคำนวณ FAR
        ['farTotalArea', 'farLandArea', 'farValue'].forEach(id => {
            document.getElementById(id).addEventListener('input', calculateFAR);
        });

        function calculateFAR() {
            const totalArea = parseFloat(document.getElementById('farTotalArea').value) || 0;
            const landArea = parseFloat(document.getElementById('farLandArea').value) || 0;
            const far = parseFloat(document.getElementById('farValue').value) || 0;
            let result = '';

            if (totalArea && landArea && !far) {
                const calculatedFAR = totalArea / landArea;
                result = `ค่า FAR = ${calculatedFAR.toFixed(2)}`;
            } else if (landArea && far && !totalArea) {
                const calculatedArea = landArea * far;
                result = `พื้นที่อาคารรวม = ${calculatedArea.toFixed(2)} ตร.ม.`;
            } else if (totalArea && far && !landArea) {
                const calculatedLand = totalArea / far;
                result = `ขนาดที่ดิน = ${calculatedLand.toFixed(2)} ตร.ม.`;
            }

            document.getElementById('farResult').textContent = result;
        }

        // การคำนวณ OSR
        ['osrOpenSpace', 'osrTotalArea', 'osrValue'].forEach(id => {
            document.getElementById(id).addEventListener('input', calculateOSR);
        });

        function calculateOSR() {
            const openSpace = parseFloat(document.getElementById('osrOpenSpace').value) || 0;
            const totalArea = parseFloat(document.getElementById('osrTotalArea').value) || 0;
            const osr = parseFloat(document.getElementById('osrValue').value) || 0;
            let result = '';

            if (openSpace && totalArea && !osr) {
                const calculatedOSR = (openSpace / totalArea) * 100;
                result = `ค่า OSR = ${calculatedOSR.toFixed(2)}%`;
            } else if (totalArea && osr && !openSpace) {
                const calculatedSpace = totalArea * (osr / 100);
                result = `พื้นที่ว่าง = ${calculatedSpace.toFixed(2)} ตร.ม.`;
            } else if (openSpace && osr && !totalArea) {
                const calculatedArea = (openSpace * 100) / osr;
                result = `พื้นที่ใช้สอยรวม = ${calculatedArea.toFixed(2)} ตร.ม.`;
            }

            document.getElementById('osrResult').textContent = result;
        }

        // การคำนวณ BCR
        ['bcrCoverArea', 'bcrLandArea', 'bcrValue'].forEach(id => {
            document.getElementById(id).addEventListener('input', calculateBCR);
        });

        function calculateBCR() {
            const coverArea = parseFloat(document.getElementById('bcrCoverArea').value) || 0;
            const landArea = parseFloat(document.getElementById('bcrLandArea').value) || 0;
            const bcr = parseFloat(document.getElementById('bcrValue').value) || 0;
            let result = '';

            if (coverArea && landArea && !bcr) {
                const calculatedBCR = (coverArea / landArea) * 100;
                result = `ค่า BCR = ${calculatedBCR.toFixed(2)}%`;
            } else if (landArea && bcr && !coverArea) {
                const calculatedCover = (bcr * landArea) / 100;
                result = `พื้นที่อาคารปกคลุมดิน = ${calculatedCover.toFixed(2)} ตร.ม.`;
            } else if (coverArea && bcr && !landArea) {
                const calculatedLand = (coverArea * 100) / bcr;
                result = `ขนาดที่ดิน = ${calculatedLand.toFixed(2)} ตร.ม.`;
            }

            document.getElementById('bcrResult').textContent = result;
        }

        // การแปลงหน่วย
        const conversions = {
            rai: {
                sqm: 1600,
                ngan: 4,
                sqwa: 400,
                sqkm: 1/625
            },
            ngan: {
                sqwa: 100,
                sqm: 400,
                rai: 1/4,
                sqkm: 1/2500
            },
            sqwa: {
                sqm: 4,
                rai: 1/400,
                ngan: 1/100,
                sqkm: 1/250000
            },
            sqm: {
                sqwa: 0.25,
                rai: 1/1600,
                ngan: 1/400,
                sqkm: 1/1000000
            },
            sqkm: {
                rai: 625,
                ngan: 2500,
                sqwa: 250000,
                sqm: 1000000
            }
        };

        ['fromUnit', 'toUnit', 'convertValue'].forEach(id => {
            document.getElementById(id).addEventListener('input', convertUnits);
        });

        function convertUnits() {
            const fromUnit = document.getElementById('fromUnit').value;
            const toUnit = document.getElementById('toUnit').value;
            const value = parseFloat(document.getElementById('convertValue').value) || 0;
            let result = '';

            if (fromUnit === toUnit) {
                result = `${value.toLocaleString('th-TH')} ${getUnitLabel(toUnit)}`;
            } else if (value) {
                const converted = value * conversions[fromUnit][toUnit];
                // เพิ่ม toLocaleString เพื่อแสดงเครื่องหมายคอมม่า
                result = `${value.toLocaleString('th-TH')} ${getUnitLabel(fromUnit)} = ${converted.toLocaleString('th-TH')} ${getUnitLabel(toUnit)}`;
            }

            document.getElementById('convertResult').textContent = result;
        }

        function getUnitLabel(unit) {
            const labels = {
                rai: 'ไร่',
                ngan: 'งาน',
                sqwa: 'ตารางวา',
                sqm: 'ตารางเมตร',
                sqkm: 'ตารางกิโลเมตร'
            };
            return labels[unit];
        }

        // ป้องกันการเลือกหน่วยซ้ำ
        document.getElementById('fromUnit').addEventListener('change', function() {
            const toUnit = document.getElementById('toUnit');
            Array.from(toUnit.options).forEach(option => {
                option.disabled = option.value === this.value;
            });
        });

        document.getElementById('toUnit').addEventListener('change', function() {
            const fromUnit = document.getElementById('fromUnit');
            Array.from(fromUnit.options).forEach(option => {
                option.disabled = option.value === this.value;
            });
        });

        // การแปลงหน่วยไทยใหม่
        document.getElementById('thaiConvertValue').addEventListener('input', convertToThaiFull);

        function convertToThaiFull() {
            const sqmValue = parseFloat(document.getElementById('thaiConvertValue').value) || 0;
            let result = '';

            if (sqmValue > 0) {
                // คำนวณไร่
                const rai = Math.floor(sqmValue / 1600);
                let remainingSqm = sqmValue - (rai * 1600);

                // คำนวณงาน
                const ngan = Math.floor(remainingSqm / 400);
                remainingSqm = remainingSqm - (ngan * 400);

                // คำนวณตารางวา
                const sqwa = Math.floor(remainingSqm / 4);

                // สร้างผลลัพธ์
                let parts = [];
                if (rai > 0) parts.push(`${rai} ไร่`);
                if (ngan > 0) parts.push(`${ngan} งาน`);
                if (sqwa > 0) parts.push(`${sqwa} ตารางวา`);

                if (parts.length > 0) {
                    result = `${sqmValue.toLocaleString('th-TH')} ตารางเมตร = ${parts.join(' ')}`;
                } else {
                    result = `${sqmValue.toLocaleString('th-TH')} ตารางเมตร = น้อยกว่า 1 ตารางวา`;
                }
            }

            document.getElementById('thaiConvertResult').textContent = result;
        }

        // การแปลงหน่วยไทยเป็นตารางเมตร
        ['thaiToSqmRai', 'thaiToSqmNgan', 'thaiToSqmWa'].forEach(id => {
            document.getElementById(id).addEventListener('input', convertThaiToSqm);
        });

        function convertThaiToSqm() {
            const rai = parseFloat(document.getElementById('thaiToSqmRai').value) || 0;
            const ngan = parseFloat(document.getElementById('thaiToSqmNgan').value) || 0;
            const wa = parseFloat(document.getElementById('thaiToSqmWa').value) || 0;
            let result = '';

            if (rai > 0 || ngan > 0 || wa > 0) {
                // คำนวณตารางเมตรแต่ละหน่วย
                const raiSqm = rai * 1600;
                const nganSqm = ngan * 400;
                const waSqm = wa * 4;
                
                // รวมทั้งหมด
                const totalSqm = raiSqm + nganSqm + waSqm;

                // แสดงผลลัพธ์
                let inputParts = [];
                if (rai > 0) inputParts.push(`${rai} ไร่`);
                if (ngan > 0) inputParts.push(`${ngan} งาน`);
                if (wa > 0) inputParts.push(`${wa} ตารางวา`);

                result = `${inputParts.join(' ')} = ${totalSqm.toLocaleString('th-TH')} ตารางเมตร`;
            }

            document.getElementById('thaiToSqmResult').textContent = result;
        }
    </script>
    <script data-goatcounter="https://mponline.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script> 
</body>
</html>
